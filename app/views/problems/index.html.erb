<%- title = params[:stream] == 'all' ? 'Public Feed' :  'My Feed'%>
<%= render 'layouts/shared/navbar_top', title: "#{title}"%>

<center>
  <div class="btn-group problem-filters mt-1" role="group" aria-label="Basic example">
    <a href="<%= problems_path %>" class="btn btn-sm btn-outline-danger <%= 'active' if params[:stream] != 'all' %>">
      <%= fa_icon('user-circle') %> My
    </a>
    <a href="<%= problems_path(stream: 'all') %>" class="btn btn-sm btn-outline-danger <%= 'active' if params[:stream] == 'all' %>">
      <%= fa_icon('th-large') %> All
    </a>
  </div>
</center>

<section class="problem__wrapper--feed">
  <div class="container">
    <div class="row">
      <div class="col-xs-12">
        <div class="problem__contents">
          <h3>Latest Problems</h3>
          <div class="row">
            <% @problems.each do |problem| %>
              <%- id = problem.id %>
              <%- asset_index = id.to_i % Problem::LENSES.length %>
              <%- image_index = (id.to_i % ProblemsController::TEXTURE_IMAGE_AMOUNT) + 1 %>
              <div class="col-xs-12 ">
                <a href="<%= problem_path(problem.id, image_index: image_index, lense: Problem::LENSES[asset_index]) %>" >
                  <div class="problem__box problem__<%= Problem::LENSES[asset_index]%>"
                    style="background: url(<%= asset_url "textures/#{image_index}.png"%>) ">
                    <div class="problem__title-wrapper">
                      <div class="problem__title">
                        <span class="problem__title--<%= Problem::LENSES[asset_index]%>"><%= problem.name.presence || 'Untitled' %></span>
                      </div>
                    </div>
                    <div class="problem__degree-thinking">
                      <%= problem.thinking %>
                    </div>
                  </div>
                </a>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
  <%= will_paginate @problems, renderer: WillPaginate::ActionView::BootstrapLinkRenderer,
    class: 'pagination__button'%>
</section>

<div data-turbolinks="false">
  <%= link_to "Create New", new_problem_path('new'),
    class: 'btn btn-block btn--third-space btn--fixed-bottom' %>
</div>
